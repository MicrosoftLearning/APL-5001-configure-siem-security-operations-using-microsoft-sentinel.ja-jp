---
lab:
  title: 演習 3 - Microsoft Defender for Cloud を使用して脅威を軽減する
  module: 'Explore Secure Score, Recommendations and Inventory'
---

# 演習 3 - セキュリティ スコア、推奨事項、インベントリを調べる

## ラボのシナリオ

以前は、概要ページの *セキュリティ スコア* タイルについて簡単に説明しました。 次に、この機能と関連する推奨事項について説明します。 Microsoft Defender for Cloud は、リソースを継続的に評価します。 すべての結果は 1 つのスコア (セキュリティ スコア) に集計され、サブスクリプションの現在のセキュリティ態勢が測定されます。スコアが高いほど、識別されたリスク レベルは低くなります。

### タスク 1: セキュリティ スコアの調査

1. Microsoft Azure portal の検索バーに「*Defender*」と入力し、**[Microsoft Defender for Cloud]** を選択します。

1. Microsoft Defender for Cloud の左側のナビゲーション メニューにある [クラウド セキュリティ] セクションで、[セキュリティ態勢] ボタンを選択します。

1. [セキュリティ スコア] ページで、現在の全体的なセキュリティ スコアを確認します。

    >**注:** スコアはパーセンテージ値として表示されますが、スコアが計算されているポイント数を確認することもできます。 スコアの計算方法の詳細については、「[セキュリティ スコアのドキュメント ページ](https://docs.microsoft.com/azure/security-center/secure-score-security-controls#how-your-secure-score-is-calculated)」をご覧ください。

1. 下部には、サブスクリプションとその現在のスコアの一覧が表示されます。 スコアの背後にある推奨事項を表示するには、**[推奨事項の表示]** を選択します。

### タスク 2: セキュリティ コントロールと推奨事項を調べる

1. Microsoft Defender for Cloud の左側のナビゲーション メニューの [全般] セクションで、[推奨事項] を選択します。

1. [推奨事項] ページで、上部のメニューから **Switch to classic view** リンクを選択します。 ページの最初の部分、「概要ビュー」に注目してください。現在の*セキュリティ スコア*、推奨事項の進行状況 (完了したセキュリティ コントロールと推奨事項の両方) とリソースの正常性 (重大度別) があります。

1. 上部のメニューで、**[CSV レポートのダウンロード]** ボタンを選択します。これにより、リソースのスナップショット、正常性状態、関連する推奨事項を取得できます。 ピボットとレポートに使用できます。

1. ドロップダウン リストから [推奨事項] を選択して、*ストレージ アカウントのパブリック アクセスを禁止する必要がある*などの形式を確認します。 

     >**注:** その推奨事項がラボ環境で使用できない場合は、使用できる推奨事項を選択します。

1. 一番上のセクションで、次に注意してください。

     - 推奨事項のタイトル: ストレージ アカウントのパブリック アクセスを禁止する必要がある
     - トップ メニュー コントロール: 除外、拒否、ポリシー定義の表示、クエリを開く
     - 重大度インジケーター: 中
     - 更新の間隔: 30 分
     - 戦術と手法: 初期アクセス

1. 次の重要な部分は、選択したリソースを修復できる修復ロジックを含む修復手順です。

    >**情報:** 推奨事項の一覧で、プレビューのようにフラグが設定された推奨事項を確認できるようになりました。 これらはスコアの計算には含まれません。 それでも、その推奨事項はプレビュー期間が終了した時点でスコアに反映されるため、修復しておく必要があります。

### タスク 3: インベントリ機能を調べる

*資産インベントリ* ダッシュボードを使用すると、Microsoft Defender for Cloud の対象となるすべてのリソースを 1 つのウィンドウで表示できます。 また、すべての Microsoft Defender for Cloud の情報と、セキュリティ態勢や保護の状態など、追加のリソースの詳細にリソースごとの可視性を提供します。 このダッシュボードは Azure Resource Graph (ARG) に基づいているため、サブスクリプション間でクエリを大規模かつ迅速かつ簡単に実行できます

1. ナビゲーション メニューの [全般] セクションで、**[インベントリ]** を選択します。

<!--- 1. Hover to the Summaries strip at the top of the page.--->

1. 環境内では、これらの数値は時間によって異なるため、同じではない可能性があります。

1. リソースの合計数に注目してください。リソースの合計数は、サブスクリプション内のリソースの合計数ではなく、Microsoft Defender for Cloud に接続されているリソースの合計数です。

1. 異常なリソースの数に注目してください。異常なリソースは、選択したフィルターに基づいて実行可能な推奨事項があるリソースです

1. Windows を検索するには、[名前でフィルター] ボックスを使用します。 これで、目的のリソース *VM1* を含むフィルター ビューが表示されます。 [推奨事項] 列の赤いバーにカーソルを合わせると、アクティブな推奨事項を含むヒントが表示されます。 xx 推奨事項の Active-xx が表示されます。これらは、参加する必要があるアクティブな推奨事項です。

1. リソースを選択して、[リソースヘルス] ウィンドウを開きます。 *[VM1]* を選択します。

1. *VM1* の [リソースへルス] ウィンドウで、推奨事項の一覧と共に仮想マシンの情報を確認します。

    >**注:** すべての推奨事項が表示されるまでに最大 24 時間かかる場合があります。 また、ラボの時間中に推奨事項が表示されない可能性があります。このようなことが発生する場合もあります。 推奨事項にデータが表示されない場合。 次の演習に進み、後でこれを確認できます。

1. フィルター ウィンドウからリソースの種類のフィルターを削除し、**追加フィルター**を選択して、セキュリティの結果フィルターに注目します。これにより、特定の脆弱性を含みやすい、すべてのリソースを見つけることができます。 CVE、KB ID、名前、不足している更新プログラムを検索することもできます。

1. フィルター ウィンドウで、前の手順で追加したセキュリティの結果フィルターを削除し、上部のメニューから **[クエリを開く]** を選択します。

1. **[Azure Resource Graph エクスプローラー]** ブレードで、**[クエリの実行]** を選択します。 これで、前の手順と同じリソースと列の一覧が作成されます。 このクエリはニーズに合わせて編集でき、ここでは非常に強力になります。

1. 上部のメニューから **[名前を付けて保存]** を選択して、後で使用するためにクエリを保存します。 クエリを使用して、定期的なレポートを作成できます。 レポートに "asc-filtered-query" という名前を付け、[保存] を選択します。

### タスク 4: 価格について

価格基準は、有効にするプランによって異なります。 さらに、基本的な CSPM (無料) の一部として、セキュリティ スコア、資産インベントリ、セキュリティに関する推奨事項など、いくつかの項目があります。

Defender for Cloud の詳細については、次をご覧ください。

- [価格ページ](https://azure.microsoft.com/pricing/details/defender-for-cloud/?v=17.23h)
- [基本的な CSPM と Defender CSPM の機能](https://learn.microsoft.com/azure/defender-for-cloud/concept-cloud-security-posture-management)

1. Microsoft Defender for Cloud のナビゲーション メニューで **[Workbooks]**、**[Public Templates]** タブの順に選択します。次に、**コスト見積もり**ブックを選択します。
1. *コスト見積もり*ブックでは、両方の Azure 用の Defender プランでのリソースの見積価格を確認できます。

### タスク 5: CWP 機能の概要

1. Microsoft Defender for Cloud メニューの [クラウド セキュリティ] セクションから **[ワークロード保護]** を選択して、ワークロード保護ダッシュボードにアクセスします。

ダッシュボードには次のセクションがあります。

- Microsoft Defender for Cloud の対象範囲 (1) - ここでは、サブスクリプション内にあり、Defender for Cloud による保護の対象となるリソースの種類を確認できます。 必要に応じて、ここでもアップグレードできます。 対象となる可能性のあるすべてのリソースをアップグレードする場合は、[すべてをアップグレード] を選択します。
- セキュリティのアラート (2) - Defender for Cloud によって環境のいずれかの領域で脅威が検出されると、セキュリティ アラートが生成されます。 これらのアラートでは、影響を受けるリソースや推奨される修復手順の詳細と、場合によっては、応答でロジック アプリをトリガーするオプションが示されます。 このグラフ内の任意の場所を選択すると、[セキュリティのアラート] ページが開きます。
- 高度な保護 (3) - Defender for Cloud には、仮想マシン、SQL データベース、コンテナー、Web アプリケーション、ネットワークなどを対象とする多数の高度な脅威防止機能が用意されています。 この [高度な保護] セクションでは、これらの各保護について、選択したサブスクリプション内のリソースの状態を確認できます。 それらのいずれかを選択して、その保護の種類の構成領域に直接移動します。
- 分析情報 (4) - ニュース、お勧めの記事、優先度の高いアラートのこのローリング ペインでは、お客様とお客様のサブスクリプションについて優先度の高いセキュリティ問題に関する Defender for Cloud の分析情報が提供されます。 脆弱性分析ツールによって VM で検出された重大度の高い CVE の一覧も、Defender for Cloud チームのメンバーによる新しいブログ記事も、[分析情報] パネルで確認できます。

## これでラボは完了です
